[General]
loglevel = notify
bypass-system = true

# Internet 测试 URL
internet-test-url = http://cp.cloudflare.com/generate_204
# 代理测速 URL
proxy-test-url = http://cp.cloudflare.com/generate_204

# 测试超时（秒）:Surge 将向该 URL 发送一个 HTTP HEAD 请求。测试只关心是否收到了返回数据，并不关心数据内容。仅支持 http:// 协议
test-timeout = 3

# 在配置信息设置好 geoip-maxmind-url 后建议在图形界面打开「自动更新」开关（或者直接在图形界面中设置 URL 及开关）
geoip-maxmind-url = https://cdn.jsdelivr.net/gh/Hackl0us/GeoIP2-CN@release/Country.mmdb

# > 排除简单主机名
exclude-simple-hostnames = true

skip-proxy = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.1/32, 169.254.0.0/16, 172.16.0.0/12, 192.168.0.0/24,192.168.122.1/32, 193.168.0.1/32, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32

# DNS设置或根据自己网络情况进行相应设置
bypass-tun = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12
dns-server = 119.29.29.29,223.5.5.5,114.114.114.114
allow-wifi-access = false

[Proxy Group]
🛑 广告拦截 = select, REJECT, DIRECT, no-alert=0, hidden=0, include-all-proxies=0
🍎 苹果服务 = select, 自动优选, DIRECT, no-alert=0, hidden=0, include-all-proxies=0
🎵 TikTok = select, 自动优选, DIRECT, no-alert=0, hidden=0, include-all-proxies=0
🐱 哔哩哔哩台湾 = select, 自动优选, DIRECT, no-alert=0, hidden=0, include-all-proxies=0
自动优选 = url-test, 夜煞, 卡车极速, no-alert=1, hidden=0, include-all-proxies=0, update-interval=0
夜煞 = select, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, policy-path=https://sub.download-hiccup.xyz/api/v1/client/subscribe?token=2c67e1fd5976d7cb16cef5105ef4515d
卡车极速 = select, policy-path=https://kcssr.ink/link/yv2DPWT6SlrKunO6?list=surge, update-interval=0, no-alert=1, hidden=0, include-all-proxies=0
彩云 = select, policy-path=http://sub.fiwebo.com/api/v1/client/subscribe?token=6d108220eb7003623501e814e634fbbe, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
无界 = select, policy-path=https://sub.wl-sub1.com/api/v1/client/subscribe?token=d98bb628b529f641d7d5c1b15e79c9f3, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0
香港节点 = url-test, policy-regex-filter=.*(港|HK|(?i)Hong))^((?!(台|日|韩|新|美)).)*$, no-alert=1, hidden=0, include-all-proxies=0, include-other-group="彩云, 夜煞"

[Rule]
# > Surge And Github 外部资源更新时发出通知
# AND,((DOMAIN,raw.githubusercontent.com), (USER-AGENT,Surge*)),全球加速,notification-text="♻️外部资源更新",notification-interval=3600
# ADGUAD去广告
DOMAIN-SET,https://anti-ad.net/surge2.txt,REJECT

# 保护隐私
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy_Domain.list,REJECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy.list,REJECT

# 反运营商劫持或恶意网站
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Hijacking/Hijacking.list,REJECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Download/Download.list,DIRECT

# YouTube
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTubeMusic/YouTubeMusic.list,自动优选
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,自动优选

# 阻止电报频繁请求
AND,((PROCESS-NAME,Telegram), (OR,((IP-CIDR,0.0.0.0/8), (IP-CIDR,224.0.0.0/4)))),REJECT
# Telegram
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Telegram/Telegram.list,自动优选
# Twitter
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Twitter.list,自动优选
# GlobalMedia
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/Streaming.list,自动优选
# PayPal
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list,自动优选
# OneDrive
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OneDrive/OneDrive.list,DIRECT
# Apple
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,DIRECT
# ChinaMedia
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/StreamingCN.list,DIRECT
# 国外网站
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list,自动优选

# Surge 的自动 REJECT 保护丢包，防止应用循环请求
IP-CIDR,0.0.0.0/32,REJECT,no-resolve

# Local Area Network 局域网
RULE-SET,LAN,DIRECT

GEOIP,CN,DIRECT
FINAL,Final

[Host]
# 该段定义本地 DNS 记录
# 该功能等同于 /etc/hosts，加上了泛解析和别名支持。
# DNS 全部交给系统处理
# * = server:syslib
# 本地值
# 特定 DNS 服务器
*.tw = server:1.1.1.1
testflight.apple.com = server:8.8.8.8
router.asus.com = server:syslib
*.tmall.com = server:223.5.5.5
*.taobao.com = server:223.5.5.5
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
*.alipay*.com = server:223.5.5.5
*.alibaba*.com = server:223.5.5.5
*.alimama*.com = server:223.5.5.5
*.qq.com = server:119.29.29.29
*.tencent.com = server:119.29.29.29
*.weixin.com = server:119.29.29.29
*.qpic.cn = server:119.29.29.29
*.jd.com = server:119.29.29.29
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
*.10010.com = server:119.29.29.29
*.unicompayment.com = server:119.29.29.29
*.vercel.app = server:119.29.29.29
*.vercel.com = server:119.29.29.29
*.ximalaya.com = server:119.29.29.29
*.baidu.com = server:119.29.29.29
*.bdstatic.com = server:119.29.29.29
*testflight.apple.com = server:8.8.4.4
mtalk.google.com = 108.177.125.188
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29

[URL Rewrite]
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302

# Weibo Short URL
^http:\/\/t\.cn http://sinaurl.cn 302


[Script]

# bilibili去广告(>=iOS15)
https://raw.githubusercontent.com/app2smile/rules/master/module/bilibili.sgmodule

# 广告联盟去广告 （快手联盟,优量汇,穿山甲）
https://raw.githubusercontent.com/app2smile/rules/master/module/adsense.sgmodule

# 微博官方APP净化
https://raw.githubusercontent.com/xOS/Config/Her/Module/General/Weibo.sgmodule

# 快速检测节点有没有解锁流媒体
https://raw.githubusercontent.com/Rabbit-Spec/Surge/Master/Module/Panel/Stream-All/Moore/Stream-All.sgmodule

# 一个可以显示你当前节点信息的面板
https://raw.githubusercontent.com/Rabbit-Spec/Surge/Master/Module/Panel/IP-Check/Moore/IP-Check.sgmodule
